<!DOCTYPE html>
<html>
<head>
    <title>Pac-Man Starter Kit</title>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            margin: 0;
            background-color: #000;
            flex-direction: column;
            font-family: Arial, sans-serif;
            color: white;
        }

        #grid {
            display: inline-grid;
            grid-gap: 0;
            border: 5px solid darkblue;
            background-color: black;
        }

        .cell {
            width: 30px; /* Μέγεθος κάθε κελιού */
            height: 30px;
            display: flex;
            justify-content: center;
            align-items: center;
            box-sizing: border-box;
        }

        .wall {
            background-color: #0000FF; /* Μπλε για τους τοίχους */
            border: 1px solid #0000FF;
        }

        .empty {
            /* Κενό κελί */
        }
        
        .dot {
            background-color: black;
        }

        .dot::after {
            content: '';
            display: block;
            width: 6px;
            height: 6px;
            border-radius: 50%;
            background-color: #FFB847; /* Χρυσό για τους πόντους */
        }

        .pacman {
            background-color: black;
        }

        .pacman::after {
            content: '⬤'; /* Σύμβολο για τον Pac-Man (ή μπορείς να χρησιμοποιήσεις εικόνα) */
            font-size: 28px;
            color: #FFFF00; /* Κίτρινο */
            line-height: 1;
            /* Για να φαίνεται σαν να ανοίγει το στόμα, μπορεί να χρειαστεί animation/rotation */
        }
        
        #score {
            margin: 20px;
            font-size: 1.5em;
        }
        
    </style>
</head>
<body>

    <div id="score">Score: <span id="scoreValue">0</span></div>
    <div id="grid"></div>
    <p>Χρησιμοποίησε τα βελάκια (↑↓←→) για να κινηθείς!</p>

    <script>
        // Ορισμός του χάρτη (1=Τοίχος, 0=Κενό, 2=Πόντος)
        const layout = [
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1],
            [1, 2, 2, 2, 2, 2, 2, 1, 2, 2, 2, 2, 2, 2, 2, 1],
            [1, 2, 1, 1, 2, 1, 2, 1, 2, 1, 2, 1, 1, 2, 2, 1],
            [1, 2, 1, 2, 2, 1, 2, 2, 2, 1, 2, 2, 1, 2, 2, 1],
            [1, 2, 1, 2, 2, 1, 1, 1, 1, 1, 2, 2, 1, 2, 2, 1],
            [1, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 2, 1],
            [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1]
        ];

        const gridElement = document.getElementById('grid');
        const rows = layout.length;
        const cols = layout[0].length;
        const cellSize = 30; // 30px, όπως στο CSS

        let pacmanPosition = { row: 1, col: 1 };
        let score = 0;
        let cells = []; // Θα αποθηκεύσει τα DOM elements για εύκολη πρόσβαση

        // 1. Ρύθμιση CSS Grid
        gridElement.style.gridTemplateColumns = `repeat(${cols}, ${cellSize}px)`;
        gridElement.style.gridTemplateRows = `repeat(${rows}, ${cellSize}px)`;

        // 2. Σχεδίαση του Χάρτη
        function drawGrid() {
            gridElement.innerHTML = ''; // Καθαρισμός του grid
            cells = []; // Επαναφορά του πίνακα κελιών

            for (let r = 0; r < rows; r++) {
                for (let c = 0; c < cols; c++) {
                    const cell = document.createElement('div');
                    cell.classList.add('cell');

                    if (layout[r][c] === 1) {
                        cell.classList.add('wall');
                    } else if (layout[r][c] === 2) {
                        cell.classList.add('dot');
                    } else {
                        cell.classList.add('empty');
                    }

                    gridElement.appendChild(cell);
                    cells.push(cell); // Αποθήκευση του στοιχείου
                }
            }
        }

        // Βοηθητική συνάρτηση για να παίρνει το DOM element από τις συντεταγμένες
        function getCellElement(row, col) {
            return cells[row * cols + col];
        }

        // 3. Αρχικοποίηση Θέσης Pac-Man
        function initializePacman() {
            const initialCell = getCellElement(pacmanPosition.row, pacmanPosition.col);
            initialCell.classList.add('pacman');
            
            // Καταναλώνει τον αρχικό πόντο αν υπάρχει
            if (layout[pacmanPosition.row][pacmanPosition.col] === 2) {
                eatDot(pacmanPosition.row, pacmanPosition.col);
            }
        }
        
        // 4. Λογική Κατανάλωσης Πόντου
        function eatDot(row, col) {
            if (layout[row][col] === 2) {
                layout[row][col] = 0; // Ο πόντος εξαφανίζεται από το μοντέλο
                score++;
                document.getElementById('scoreValue').textContent = score;
                
                // Ενημέρωση της εμφάνισης (αφαίρεση της κλάσης dot)
                const cell = getCellElement(row, col);
                cell.classList.remove('dot');
                cell.classList.add('empty');
            }
        }

        // 5. Λογική Κίνησης
        function movePacman(newRow, newCol) {
            // Έλεγχος συνόρων
            if (newRow < 0 || newRow >= rows || newCol < 0 || newCol >= cols) {
                return;
            }
            
            // Έλεγχος σύγκρουσης με τοίχο (1)
            if (layout[newRow][newCol] === 1) {
                return; 
            }

            // Καθαρισμός της παλιάς θέσης
            const oldCell = getCellElement(pacmanPosition.row, pacmanPosition.col);
            oldCell.classList.remove('pacman');

            // Ενημέρωση της θέσης
            pacmanPosition.row = newRow;
            pacmanPosition.col = newCol;

            // Κατανάλωση πόντου
            eatDot(newRow, newCol);

            // Σχεδίαση Pac-Man στη νέα θέση
            const newCell = getCellElement(pacmanPosition.row, pacmanPosition.col);
            newCell.classList.add('pacman');
        }

        // 6. Χειρισμός Πληκτρολογίου
        document.addEventListener('keydown', (e) => {
            let newRow = pacmanPosition.row;
            let newCol = pacmanPosition.col;

            switch (e.key) {
                case 'ArrowUp':
                    newRow--;
                    break;
                case 'ArrowDown':
                    newRow++;
                    break;
                case 'ArrowLeft':
                    newCol--;
                    break;
                case 'ArrowRight':
                    newCol++;
                    break;
                default:
                    return; // Αγνοεί άλλα πλήκτρα
            }
            
            e.preventDefault(); // Αποτρέπει το scrolling της σελίδας
            movePacman(newRow, newCol);
        });

        // Εκτέλεση του παιχνιδιού
        drawGrid();
        initializePacman();
    </script>

</body>
</html>
